## how to run

```
bun install
bun run dev
```

## todo voronoi

- 每个地块唯一颜色作为 id
- 底图
  - 手动处理像素化
- 生成高度图 -> 省份数据
- 生成温度图
  - 按纬度计算基础温度
  - 按地块高度计算海拔温度
    - 海拔每升高 100 米，温度降低 0.6℃
- 生成湿度图
  - 遍历地图，基于高度图得到陆地边界
  - 以陆地边界地块为基础，遍历地图，为每一个地块计算陆地边界临近度，并得到海洋极点与陆地极点
  - 遍历地块，计算地块季节气压
    - 夏天时，海洋地块温度更低，距离海洋极点越近气压越高，反之越低
    - 冬天时，海洋地块温度更高，距离海洋极点越近气压越低，反之越高
  - 根据地块气压，计算地块风向
    - 遍历地图，从极点开始，本地块到气压差最大的地块则为风向
    - 高压地块会将湿度传递到低压地块，海洋地块湿度为 1，陆地地块湿度为 0
  - 从陆地边界开始，海洋风会携带 1 的湿度，根据风力大小计算截留湿度，风力越小，湿度越大
- 生成河流

## todo

- 缓存节点渲染结果
- 平滑缩放滚动效果
- 严格约束缩放级别到指定大小
- maxLevel 应该由 ChunkTree 处理
